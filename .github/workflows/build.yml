name: ğŸ—ï¸ Build GodKeyLogger

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    - name: ğŸ”§ Setup MSVC
      shell: cmd
      run: |
        echo Setting up Visual Studio 2022...
        call "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Auxiliary\Build\vcvars64.bat"
        
    - name: ğŸ—ï¸ Build Executable
      shell: cmd
      run: |
        echo Compiling GodKeyLogger v3.0...
        
        cl.exe /nologo /EHsc /Ox /W2 /std:c++17 ^
          /DUNICODE /D_UNICODE /MT ^
          GodKeyLogger.cpp ^
          /link /SUBSYSTEM:WINDOWS ^
          /OUT:GodKeyLogger.exe ^
          user32.lib gdi32.lib advapi32.lib winhttp.lib crypt32.lib
        
        if %errorlevel% neq 0 exit 1
        
    - name: âœ… Verify Build
      shell: cmd
      run: |
        if exist GodKeyLogger.exe (
          echo âœ… BUILD SUCCESSFUL!
          for %%F in (GodKeyLogger.exe) do echo ğŸ“¦ Size: %%~zF bytes
        ) else (
          echo âŒ BUILD FAILED!
          exit 1
        )
        
    - name: ğŸ“¤ Upload Artifact
      uses: actions/upload-artifact@v4
      with:
        name: GodKeyLogger-v3.0
        path: GodKeyLogger.exe
        retention-days: 30
