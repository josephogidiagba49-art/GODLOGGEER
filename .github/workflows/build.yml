name: üèóÔ∏è Build GodKeyLogger

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - name: üì• Checkout code
      uses: actions/checkout@v4
      
    - name: üèóÔ∏è Build (Direct Method - No Setup)
      shell: cmd
      run: |
        echo ====================================
        echo   BUILDING GOD KEYLOGGER v3.0
        echo ====================================
        
        :: SIMPLE DIRECT BUILD - NO ENVIRONMENT SETUP
        :: Just use the full path to cl.exe
        
        "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Tools\MSVC\14.38.33130\bin\Hostx64\x64\cl.exe" ^
        /nologo ^
        /EHsc ^
        /O2 ^
        /std:c++17 ^
        /DUNICODE ^
        /D_UNICODE ^
        /MT ^
        GodKeyLogger.cpp ^
        /link ^
        /SUBSYSTEM:WINDOWS ^
        /OUT:GodKeyLogger.exe ^
        user32.lib gdi32.lib advapi32.lib winhttp.lib crypt32.lib
        
        if %errorlevel% neq 0 (
            echo ‚ö†Ô∏è First method failed, trying alternative path...
            
            :: Alternative path (different version)
            "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Tools\MSVC\14.37.32822\bin\Hostx64\x64\cl.exe" ^
            /nologo /EHsc /O2 GodKeyLogger.cpp ^
            /link /SUBSYSTEM:WINDOWS /OUT:GodKeyLogger.exe ^
            user32.lib gdi32.lib advapi32.lib winhttp.lib crypt32.lib
        )
        
    - name: ‚úÖ Verify Build
      shell: cmd
      run: |
        if exist GodKeyLogger.exe (
            echo ‚úÖ BUILD SUCCESSFUL!
            echo üìÅ File: GodKeyLogger.exe
            
            for %%F in (GodKeyLogger.exe) do (
                echo üì¶ Size: %%~zF bytes
                echo üïê Time: %time%
            )
            
            echo.
            echo ====================================
            echo   READY TO DEPLOY
            echo ====================================
        ) else (
            echo ‚ùå BUILD FAILED!
            echo Checking for compiler...
            dir "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Tools\MSVC\"
            exit 1
        )
        
    - name: üì§ Upload Artifact
      uses: actions/upload-artifact@v4
      with:
        name: GodKeyLogger-Executable
        path: GodKeyLogger.exe
        retention-days: 30
