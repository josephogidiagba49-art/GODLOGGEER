name: ğŸ—ï¸ Build GodKeyLogger

# ğŸ”¥ SIMPLE TRIGGER - No duplicates
on:
  push:
    branches: [ main ]
  workflow_dispatch:  # Manual trigger option

# ğŸ”¥ PREVENT CONCURRENT RUNS
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

env:
  EXE_NAME: "GodKeyLogger.exe"

jobs:
  build:
    name: ğŸ”¨ Build Windows Executable
    runs-on: windows-latest
    
    steps:
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4
      
    - name: âš™ï¸ Setup Visual Studio
      uses: microsoft/setup-msbuild@v1.1
      
    - name: ğŸ—ï¸ Compile with MSVC
      shell: cmd
      run: |
        echo ==============================
        echo   Building: GodKeyLogger
        echo ==============================
        
        cl /EHsc /Ox /W2 /std:c++17 ^
          /DUNICODE /D_UNICODE /MT ^
          GodKeyLogger.cpp ^
          /link /SUBSYSTEM:WINDOWS ^
          /OUT:GodKeyLogger.exe ^
          user32.lib gdi32.lib advapi32.lib ^
          winhttp.lib crypt32.lib
          
        if %errorlevel% neq 0 exit 1
        
    - name: âœ… Verify build
      shell: cmd
      run: |
        if not exist GodKeyLogger.exe (
          echo "âŒ ERROR: Build failed!"
          exit 1
        )
        
        echo "âœ… SUCCESS: Build completed!"
        echo "ğŸ“ File: GodKeyLogger.exe"
        
        for %%F in (GodKeyLogger.exe) do (
          echo "ğŸ“¦ Size: %%~zF bytes"
        )
        
    - name: ğŸ“¤ Upload artifact
      uses: actions/upload-artifact@v4
      with:
        name: GodKeyLogger-Executable
        path: GodKeyLogger.exe
        retention-days: 30
